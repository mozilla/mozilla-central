# This is a sample buildmaster config file. It must be installed as
# 'master.cfg' in your buildmaster's base directory (although the filename
# can be changed with the --basedir option to 'mktap buildbot master').

# It has one job: define a dictionary named BuildmasterConfig. This
# dictionary has a variety of keys to control different aspects of the
# buildmaster. They are documented in docs/config.xhtml .

import os.path
# from buildbot.changes.freshcvs import FreshCVSSource
from buildbot.process import factory
from buildbot.scheduler import Scheduler, Periodic
from buildbot.status import html
from buildbot import locks

# from auth import authlist, debugPassword

import perfrunner
reload(perfrunner)
from perfrunner import *

###
### Tinderbox builder names and build directories
###
#moz2
WIN32_MOZ2_CENTRAL_BUILDERS=["WINNT 5.2 mozilla-central build", "WINNT 5.2 mozilla-central nightly"]
WIN32_MOZ2_CENTRAL_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/mozilla-central-win32/"
LINUX_MOZ2_CENTRAL_BUILDERS=["Linux mozilla-central build", "Linux mozilla-central nightly"]
LINUX_MOZ2_CENTRAL_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/mozilla-central-linux/"
MAC_MOZ2_CENTRAL_BUILDERS=["OS X 10.5.2 mozilla-central build", "OS X 10.5.2 mozilla-central nightly"]
MAC_MOZ2_CENTRAL_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/mozilla-central-macosx/"
#actionmonkey
WIN32_MOZ2_ACTIONMONKEY_BUILDERS=["WINNT 5.2 actionmonkey build", "WINNT 5.2 actionmonkey nightly"]
WIN32_MOZ2_ACTIONMONKEY_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/actionmonkey-win32/"
LINUX_MOZ2_ACTIONMONKEY_BUILDERS=["Linux actionmonkey build", "Linux actionmonkey nightly"]
LINUX_MOZ2_ACTIONMONKEY_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/actionmonkey-linux/"
MAC_MOZ2_ACTIONMONKEY_BUILDERS=["OS X 10.5.2 actionmonkey build", "OS X 10.5.2 actionmonkey nightly"]
MAC_MOZ2_ACTIONMONKEY_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/actionmonkey-macosx/"
#1.9 & 1.8 (cvs trunk/branch)
WIN32_TRUNK_BUILDERS=["WINNT 5.2 fx-win32-tbox Depend Nightly"]
WIN32_TRUNK_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/FX-WIN32-TBOX-mozilla1.9.0/"
WIN32_BRANCH_BUILDERS=["WINNT 5.2 production-pacifica-vm02 Depend Fx-Nightly"]
WIN32_BRANCH_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/production-pacifica-vm02-mozilla1.8/"
LINUX_TRUNK_BUILDERS=["Linux fx-linux-tbox Depend Nightly"]
LINUX_TRUNK_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/fx-linux-tbox-mozilla1.9.0/"
LINUX_BRANCH_BUILDERS=["Linux production-prometheus-vm02 Depend Fx-Nightly"]
LINUX_BRANCH_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/production-prometheus-vm02-mozilla1.8/"
MAC_TRUNK_BUILDERS=["MacOSX Darwin 8.8.4 bm-xserve08 Depend Universal Nightly"]
MAC_TRUNK_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/bm-xserve08-mozilla1.9.0/"
MAC_BRANCH_BUILDERS=["MacOSX Darwin 8.7.0 bm-xserve05 Depend Fx-Nightly"]
MAC_BRANCH_BUILDDIR="http://ftp.mozilla.org/pub/mozilla.org/firefox/tinderbox-builds/bm-xserve05-mozilla1.8/"

# This is the dictionary that the buildmaster pays attention to. We also use
# a shorter alias to save typing.
c = BuildmasterConfig = {}

##
## Misc Config
##

c['debugPassword'] = "mozilla"
#c['manhole'] = Manhole(9999, "admin", "password")
c['projectName'] = "Talos"
c['projectURL'] = "http://quality.mozilla.org/en/projects/automation/talos"
c['buildbotURL'] = "http://qm-buildbot01.mozilla.org:2004"
c['slavePortnum'] = 9988

##
## Slaves
##

c['bots'] = [("qm-mini-xp01", "w1nd3rs"),
             ("qm-mini-xp02", "w1nd3rs"),
             ("qm-mini-xp03", "w1nd3rs"),
             ("qm-mini-xp04", "w1nd3rs"),
             ("qm-mini-xp05", "w1nd3rs"),
             ("qm-mini-xp06", "w1nd3rs"),
             ("qm-mini-xp07", "w1nd3rs"),
             ("qm-mini-xp08", "w1nd3rs"),
             ("qm-mini-vista01", "vist@"),
             ("qm-mini-vista02", "vist@"),
             ("qm-mini-vista03", "vist@"),
             ("qm-mini-vista04", "vist@"),
             ("qm-mini-vista05", "vist@"),
             ("qm-pmac01", "mac1nt0sh"),
             ("qm-pmac02", "mac1nt0sh"),
             ("qm-pmac03", "mac1nt0sh"),
             ("qm-pmac04", "mac1nt0sh"),
             ("qm-pmac05", "mac1nt0sh"),
             ("qm-pmac-trunk04", "mac1nt0sh"),
             ("qm-pmac-trunk05", "mac1nt0sh"),
             ("qm-pmac-trunk06", "mac1nt0sh"),
             ("qm-mini-ubuntu01", "l1nux"),
             ("qm-mini-ubuntu02", "l1nux"),
             ("qm-mini-ubuntu03", "l1nux"),
             ("qm-mini-ubuntu04", "l1nux"),
             ("qm-mini-ubuntu05", "l1nux"),
             ("qm-pxp-jss01", "w1nd3rs"),
             ("qm-pxp-jss02", "w1nd3rs"),
             ("qm-pxp-jss03", "w1nd3rs"),
             ("qm-pxp-fast01", "w1nd3rs"),
             ("qm-pxp-fast02", "w1nd3rs"),
             ("qm-pxp-fast03", "w1nd3rs"),
             ("qm-plinux-fast01", "l1nux"),
             ("qm-plinux-fast02", "l1nux"),
             ("qm-plinux-fast03", "l1nux"),
             ("qm-pmac-fast01", "mac1nt0sh"),
             ("qm-pmac-fast02", "mac1nt0sh"),
             ("qm-pmac-fast03", "mac1nt0sh"),
             ("qm-pmac-trunk01", "mac1nt0sh"),
             ("qm-pmac-trunk02", "mac1nt0sh"),
             ("qm-pmac-trunk03", "mac1nt0sh"),
             ("qm-pxp-trunk01", "w1nd3rs"),
             ("qm-pxp-trunk02", "w1nd3rs"),
             ("qm-pxp-trunk03", "w1nd3rs"),
             ("qm-plinux-trunk01", "l1nux"),
             ("qm-plinux-trunk02", "l1nux"),
             ("qm-plinux-trunk03", "l1nux"),
             ("qm-pmac-trunk07", "mac1nt0sh"),
             ("qm-pmac-trunk08", "mac1nt0sh"),
             ("qm-pmac-trunk09", "mac1nt0sh"),
             ("qm-pxp-trunk04", "w1nd3rs"),
             ("qm-pxp-trunk05", "w1nd3rs"),
             ("qm-pxp-trunk06", "w1nd3rs"),
             ("qm-plinux-trunk04", "l1nux"),
             ("qm-plinux-trunk05", "l1nux"),
             ("qm-plinux-trunk06", "l1nux"),
             ("qm-pvista-trunk01", "vist@"),
             ("qm-pvista-trunk02", "vist@"),
             ("qm-pvista-trunk03", "vist@"),
             ("qm-pleopard-trunk01", "mac1nt0sh"),
             ("qm-pleopard-trunk02", "mac1nt0sh"),
             ("qm-pleopard-trunk03", "mac1nt0sh")]


##
## Status
##

c['status'] = []
c['status'].append(html.Waterfall(http_port=2006,
           css="/build/perfmaster/waterfall.css"))

from tinderboxmailnotifier import TinderboxMailNotifier
from buildbot.status import tinderbox
from buildbot.status.mail import MailNotifier

c['status'].append(MailNotifier(
                       fromaddr="talos@qa.mozilla",
                       sendToInterestedUsers=False,
                       extraRecipients=["anodelman@mozilla.com",
                                        "rcampbell@mozilla.com"],
                       mode="failing",
                       builders=None, # send for all builders
                       relayhost="smtp.mozilla.org"))

# this is the Firefox3.0 TinderboxMailNotifier
c['status'].append(TinderboxMailNotifier(
                       fromaddr="rcampbell@mozilla.com",
                       tree="Firefox3.0",
                       extraRecipients=["tinderbox-daemon@tinderbox.mozilla.org",],
                       relayhost="smtp.mozilla.org",
                       builders=["WINNT 5.1 mini talos trunk",
                                 "WINNT 5.1 mini talos trunk nochrome",
                                 "WINNT 5.1 mini talos trunk jss",
                                 "WINNT 6.0 talos trunk",
                                 "WINNT 6.0 talos trunk nochrome",
                                 "Linux talos trunk",
                                 "Linux talos trunk nochrome",
                                 "MacOSX Darwin 8.8.1 talos trunk",
                                 "MacOSX Darwin 8.8.1 talos trunk nochrome",
                                 "MacOSX Darwin 9.2.2 talos trunk",
                                 "WINNT 5.1 mini talos trunk fast",
                                 "Linux talos trunk fast",
                                 "MacOSX Darwin 8.8.1 talos trunk fast"],
                       useChangeTime=True,
                       logCompression="bzip2"))

# this is the Mozilla1.8 TinderboxMailNotifier
c['status'].append(TinderboxMailNotifier(
                       fromaddr="rcampbell@mozilla.com",
                       tree="Mozilla1.8",
                       extraRecipients=["tinderbox-daemon@tinderbox.mozilla.org",],
                       relayhost="smtp.mozilla.org",
                       builders=["WINNT 5.1 mini talos branch",
                                 "WINNT 5.1 mini talos branch fast",
                                 "WINNT 6.0 talos branch",
                                 "Linux talos branch",
                                 "Linux talos branch fast",
                                 "MacOSX Darwin 8.8.1 talos branch",
                                 "MacOSX Darwin 8.8.1 talos branch fast"],
                       useChangeTime=True,
                       logCompression="bzip2"))

# this is the Firefox TinderboxMailNotifier
c['status'].append(TinderboxMailNotifier(
                       fromaddr="rcampbell@mozilla.com",
                       tree="Firefox",
                       extraRecipients=["tinderbox-daemon@tinderbox.mozilla.org",],
                       relayhost="smtp.mozilla.org",
                       builders=["WINNT 5.1 talos mozilla-central",
                                 "WINNT 6.0 talos mozilla-central",
                                 "Linux talos mozilla-central",
                                 "MacOSX Darwin 8.8.1 talos mozilla-central",
                                 "MacOSX Darwin 9.2.2 talos mozilla-central",
                                 "WINNT 5.1 talos mozilla-central fast",
                                 "MacOSX Darwin 8.8.1 talos mozilla-central fast",
                                 "Linux talos mozilla-central fast"],
                       useChangeTime=True,
                       logCompression="bzip2"))

# this is the Actionmonkey TinderboxMailNotifier
c['status'].append(TinderboxMailNotifier(
                       fromaddr="rcampbell@mozilla.com",
                       tree="Actionmonkey",
                       extraRecipients=["tinderbox-daemon@tinderbox.mozilla.org",],
                       relayhost="smtp.mozilla.org",
                       builders=["WINNT 5.1 talos actionmonkey",
                                 "MacOSX Darwin 8.8.1 talos actionmonkey",
                                 "Linux talos actionmonkey"],
                       useChangeTime=True,
                       logCompression="bzip2"))


##
## Sources
##

import tinderboxpoller
reload(tinderboxpoller)
from tinderboxpoller import TinderboxPoller

c['sources'] = []

c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Mozilla1.8",
    branch = "BRANCH_1_8",
    machines = WIN32_BRANCH_BUILDERS,
    pollInterval = 10 * 60)
)

c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Firefox3.0",
    branch = "HEAD",
    machines = WIN32_TRUNK_BUILDERS,
    pollInterval = 10 * 60)
)

c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Firefox3.0",
    branch = "HEAD_LINUX",
    machines = LINUX_TRUNK_BUILDERS,
    pollInterval = 10 * 60)
)

c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Mozilla1.8",
    branch = "BRANCH_LINUX",
    machines = LINUX_BRANCH_BUILDERS,
    pollInterval = 10 * 60)
)

c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Firefox3.0",
    branch = "HEAD-MAC",
    machines = MAC_TRUNK_BUILDERS,
    pollInterval = 10 * 60)
)

c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Mozilla1.8",
    branch = "BRANCH-MAC",
    machines = MAC_BRANCH_BUILDERS,
    pollInterval = 10 * 60)
)

# firefox 3.1
c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Firefox",
    branch = "MOZ2-WIN32-CENTRAL",
    machines = WIN32_MOZ2_CENTRAL_BUILDERS,
    pollInterval = 10 * 60)
)

c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Firefox",
    branch = "MOZ2-LINUX-CENTRAL",
    machines = LINUX_MOZ2_CENTRAL_BUILDERS,
    pollInterval = 10 * 60)
)

c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Firefox",
    branch = "MOZ2-MAC-CENTRAL",
    machines = MAC_MOZ2_CENTRAL_BUILDERS,
    pollInterval = 10 * 60)
)

#actionmonkey
c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Actionmonkey",
    branch = "MOZ2-WIN32-ACTIONMONKEY",
    machines = WIN32_MOZ2_ACTIONMONKEY_BUILDERS,
    pollInterval = 10 * 60)
)

c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Actionmonkey",
    branch = "MOZ2-LINUX-ACTIONMONKEY",
    machines = LINUX_MOZ2_ACTIONMONKEY_BUILDERS,
    pollInterval = 10 * 60)
)

c['sources'].append(TinderboxPoller(
    tinderboxURL = "http://tinderbox.mozilla.org",
    tree = "Actionmonkey",
    branch = "MOZ2-MAC-ACTIONMONKEY",
    machines = MAC_MOZ2_ACTIONMONKEY_BUILDERS,
    pollInterval = 10 * 60)
)

##
## Schedulers
##

c['schedulers'] = []

## WINDOWS
c['schedulers'].append(MultiBuildScheduler(name="head perfrun multi scheduler",
                                 branch="HEAD",
                                 treeStableTimer=5*60,
                                 builderNames=["WINNT 5.1 mini talos trunk",
                                               "WINNT 5.1 mini talos trunk jss",
                                               "WINNT 6.0 talos trunk"]
))
c['schedulers'].append(Scheduler(name="head perfrun scheduler",
                                 branch="HEAD",
                                 treeStableTimer=5*60,
                                 builderNames=["WINNT 5.1 mini talos trunk nochrome",
                                               "WINNT 5.1 mini talos trunk fast",
                                               "WINNT 6.0 talos trunk nochrome"]
))
c['schedulers'].append(Scheduler(name="branch perfrun scheduler",
                                 branch="BRANCH_1_8",
                                 treeStableTimer=5*60,
                                 builderNames=["WINNT 5.1 mini talos branch",
                                               "WINNT 5.1 mini talos branch fast",
                                               "WINNT 6.0 talos branch"]
))
c['schedulers'].append(MultiBuildScheduler(name="moz2 central win32 scheduler",
                                 branch="MOZ2-WIN32-CENTRAL",
                                 treeStableTimer=5*60,
                                 builderNames=["WINNT 5.1 talos mozilla-central",
                                               "WINNT 5.1 talos mozilla-central fast",
                                               "WINNT 6.0 talos mozilla-central"]
))
c['schedulers'].append(MultiBuildScheduler(name="moz2 actionmonkey win32 scheduler",
                                 branch="MOZ2-WIN32-ACTIONMONKEY",
                                 treeStableTimer=5*60,
                                 builderNames=["WINNT 5.1 talos actionmonkey"]
))
## LINUX
c['schedulers'].append(Scheduler(name="head perfrun linux scheduler",
                                 branch="HEAD_LINUX",
                                 treeStableTimer=5*60,
                                 builderNames=["Linux talos trunk",
                                               "Linux talos trunk nochrome",
                                               "Linux talos trunk fast"]
))
c['schedulers'].append(Scheduler(name="branch perfrun linux scheduler",
                                 branch="BRANCH_LINUX",
                                 treeStableTimer=5*60,
                                 builderNames=["Linux talos branch",
                                               "Linux talos branch fast"]
))
c['schedulers'].append(Scheduler(name="moz2 central perfrun linux scheduler",
                                 branch="MOZ2-LINUX-CENTRAL",
                                 treeStableTimer=5*60,
                                 builderNames=["Linux talos mozilla-central",
                                               "Linux talos mozilla-central fast"]
))
c['schedulers'].append(MultiBuildScheduler(name="moz2 actionmonkey perfrun linux scheduler",
                                 branch="MOZ2-LINUX-ACTIONMONKEY",
                                 treeStableTimer=5*60,
                                 builderNames=["Linux talos actionmonkey"]
))
## MAC
c['schedulers'].append(Scheduler(name="head perfrun scheduler mac",
                                 branch="HEAD-MAC",
                                 treeStableTimer=5*60,
                                 builderNames=["MacOSX Darwin 8.8.1 talos trunk",
                                               "MacOSX Darwin 8.8.1 talos trunk nochrome",
                                               "MacOSX Darwin 8.8.1 talos trunk fast",
                                               "MacOSX Darwin 9.2.2 talos trunk"]
))
c['schedulers'].append(Scheduler(name="branch perfrun scheduler mac",
                                 branch="BRANCH-MAC",
                                 treeStableTimer=5*60,
                                 builderNames=["MacOSX Darwin 8.8.1 talos branch",
                                               "MacOSX Darwin 8.8.1 talos branch fast"]
))
c['schedulers'].append(Scheduler(name="moz2 central perfrun mac scheduler",
                                 branch="MOZ2-MAC-CENTRAL",
                                 treeStableTimer=5*60,
                                 builderNames=["MacOSX Darwin 8.8.1 talos mozilla-central",
                                               "MacOSX Darwin 8.8.1 talos mozilla-central fast",
                                               "MacOSX Darwin 9.2.2 talos mozilla-central"]
))
c['schedulers'].append(MultiBuildScheduler(name="moz2 actionmonkey perfrun mac scheduler",
                                 branch="MOZ2-MAC-ACTIONMONKEY",
                                 treeStableTimer=5*60,
                                 builderNames=["MacOSX Darwin 8.8.1 talos actionmonkey"]
))

# the 'builders' list defines the Builders. Each one is configured with a
# dictionary, using the following keys:
#  name (required): the name used to describe this bilder
#  slavename (required): which slave to use, must appear in c['bots']
#  builddir (required): which subdirectory to run the builder in
#  factory (required): a BuildFactory to define how the build is run
#  periodicBuildTime (optional): if set, force a build every N seconds


graphConfig    = ['--resultsServer', 'graphs.mozilla.org', '--resultsLink', '/server/bulk.cgi']

basicConfig    = graphConfig + ['--activeTests', 'ts:tp:tdhtml:tsvg:twinopen:tsspider:tgfx']
branchConfig   = graphConfig + ['--activeTests', 'ts:tp:tdhtml:tsvg:twinopen:tsspider'] 
nochromeConfig = graphConfig + ['--activeTests', 'ts:tp:tdhtml:tsvg:twinopen:tsspider:tgfx', '--noChrome']
jssConfig      = graphConfig + ['--activeTests', 'ts:twinopen:tjss:tsspider']
fastConfig     = graphConfig + ['--activeTests', 'ts:tp:tdhtml:twinopen:tsspider']
fastManifest   = 'configs/historic_manifest.txt'

basicTalosCmd  = ['python', 'run_tests.py', '--noisy']

#WIN
win32_trunk_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="1.9",
                          configOptions=basicConfig,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_TRUNK_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

win32_trunk_nochrome_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="1.9",
                          configOptions=nochromeConfig,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_TRUNK_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

win32_trunk_fast_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="1.9",
                          configOptions=fastConfig,
                          customManifest=fastManifest,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_TRUNK_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

win32_trunk_jss_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="1.9",
                          configOptions=jssConfig,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_TRUNK_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

win32_branch_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="1.8",
                          configOptions=branchConfig,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_BRANCH_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

win32_branch_fast_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="1.8",
                          configOptions=fastConfig,
                          customManifest=fastManifest,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_BRANCH_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

win32_moz2_central_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="2.0",
                          configOptions=basicConfig,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_MOZ2_CENTRAL_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

win32_moz2_central_fast_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="2.0",
                          configOptions=fastConfig,
                          customManifest=fastManifest,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_MOZ2_CENTRAL_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

win32_moz2_actionmonkey_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="2.0",
                          configOptions=basicConfig,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_MOZ2_ACTIONMONKEY_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

#VISTA
vista_trunk_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="1.9",
                          configOptions=basicConfig,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_TRUNK_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

vista_trunk_nochrome_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="1.9",
                          configOptions=nochromeConfig,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_TRUNK_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

vista_branch_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="1.8",
                          configOptions=branchConfig,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_BRANCH_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

vista_moz2_central_steps = TalosFactory(OS = 'win',
                          envName='vc8perf',
                          buildBranch="2.0",
                          configOptions=basicConfig,
                          buildSearchString="en-US.win32.zip",
                          buildDir=WIN32_MOZ2_CENTRAL_BUILDDIR,
                          buildPath="..\\firefox\\firefox.exe",
                          talosCmd=basicTalosCmd)

#LINUX
linux_trunk_steps = TalosFactory(OS = 'linux',
                          envName='linux',
                          buildBranch="1.9",
                          configOptions=basicConfig,
                          buildSearchString="en-US.linux-i686.tar.bz2",
                          buildDir=LINUX_TRUNK_BUILDDIR,
                          buildPath="../firefox/firefox",
                          talosCmd=basicTalosCmd)

linux_trunk_nochrome_steps = TalosFactory(OS = 'linux',
                          envName='linux',
                          buildBranch="1.9",
                          configOptions=nochromeConfig,
                          buildSearchString="en-US.linux-i686.tar.bz2",
                          buildDir=LINUX_TRUNK_BUILDDIR,
                          buildPath="../firefox/firefox",
                          talosCmd=basicTalosCmd)

linux_trunk_fast_steps = TalosFactory(OS = 'linux',
                          envName='linux',
                          buildBranch="1.9",
                          configOptions=fastConfig,
                          customManifest=fastManifest,
                          buildSearchString="en-US.linux-i686.tar.bz2",
                          buildDir=LINUX_TRUNK_BUILDDIR,
                          buildPath="../firefox/firefox",
                          talosCmd=basicTalosCmd)

linux_branch_steps = TalosFactory(OS = 'linuxbranch',
                          envName='linux',
                          buildBranch="1.8",
                          configOptions=branchConfig,
                          buildSearchString="en-US.linux-i686.tar.gz",
                          buildDir=LINUX_BRANCH_BUILDDIR,
                          buildPath="../firefox/firefox",
                          talosCmd=basicTalosCmd)

linux_branch_fast_steps = TalosFactory(OS = 'linuxbranch',
                          envName='linux',
                          buildBranch="1.8",
                          configOptions=fastConfig,
                          customManifest=fastManifest,
                          buildSearchString="en-US.linux-i686.tar.gz",
                          buildDir=LINUX_BRANCH_BUILDDIR,
                          buildPath="../firefox/firefox",
                          talosCmd=basicTalosCmd)
                           
linux_moz2_central_steps = TalosFactory(OS = 'linux',
                          envName='linux',
                          buildBranch="2.0",
                          configOptions=basicConfig,
                          buildSearchString="en-US.linux-i686.tar.bz2",
                          buildDir=LINUX_MOZ2_CENTRAL_BUILDDIR,
                          buildPath="../firefox/firefox",
                          talosCmd=basicTalosCmd)

linux_moz2_central_fast_steps = TalosFactory(OS = 'linux',
                          envName='linux',
                          buildBranch="2.0",
                          configOptions=fastConfig,
                          customManifest=fastManifest,
                          buildSearchString="en-US.linux-i686.tar.bz2",
                          buildDir=LINUX_MOZ2_CENTRAL_BUILDDIR,
                          buildPath="../firefox/firefox",
                          talosCmd=basicTalosCmd)

linux_moz2_actionmonkey_steps = TalosFactory(OS = 'linux',
                          envName='linux',
                          buildBranch="2.0",
                          configOptions=basicConfig,
                          buildSearchString="en-US.linux-i686.tar.bz2",
                          buildDir=LINUX_MOZ2_ACTIONMONKEY_BUILDDIR,
                          buildPath="../firefox/firefox",
                          talosCmd=basicTalosCmd)

#MAC
mac_trunk_steps = TalosFactory(OS = 'tiger',
                          envName='mac',
                          buildBranch="1.9",
                          configOptions=basicConfig,
                          buildSearchString="en-US.mac.dmg",
                          buildDir=MAC_TRUNK_BUILDDIR,
                          buildPath="../GranParadiso.app/Contents/MacOS/firefox",
                          talosCmd=basicTalosCmd)

mac_trunk_nochrome_steps = TalosFactory(OS = 'tiger',
                          envName='mac',
                          buildBranch="1.9",
                          configOptions=nochromeConfig,
                          buildSearchString="en-US.mac.dmg",
                          buildDir=MAC_TRUNK_BUILDDIR,
                          buildPath="../GranParadiso.app/Contents/MacOS/firefox",
                          talosCmd=basicTalosCmd)

mac_trunk_fast_steps = TalosFactory(OS = 'tiger',
                          envName='mac',
                          buildBranch="1.9",
                          configOptions=fastConfig,
                          customManifest=fastManifest,
                          buildSearchString="en-US.mac.dmg",
                          buildDir=MAC_TRUNK_BUILDDIR,
                          buildPath="../GranParadiso.app/Contents/MacOS/firefox",
                          talosCmd=basicTalosCmd)

leopard_trunk_steps = TalosFactory(OS = 'leopard',
                          envName='mac',
                          buildBranch="1.9",
                          configOptions=basicConfig,
                          buildSearchString="en-US.mac.dmg",
                          buildDir=MAC_TRUNK_BUILDDIR,
                          buildPath="../GranParadiso.app/Contents/MacOS/firefox",
                          talosCmd=basicTalosCmd)

mac_branch_steps = TalosFactory(OS = 'tiger',
                          envName='mac',
                          buildBranch="1.8",
                          configOptions=branchConfig,
                          buildSearchString="en-US.mac.dmg",
                          buildDir=MAC_BRANCH_BUILDDIR,
                          buildPath="../BonEcho.app/Contents/MacOS/firefox",
                          talosCmd=basicTalosCmd)

mac_branch_fast_steps = TalosFactory(OS = 'tiger',
                          envName='mac',
                          buildBranch="1.8",
                          configOptions=fastConfig,
                          customManifest=fastManifest,
                          buildSearchString="en-US.mac.dmg",
                          buildDir=MAC_BRANCH_BUILDDIR,
                          buildPath="../BonEcho.app/Contents/MacOS/firefox",
                          talosCmd=basicTalosCmd)

mac_moz2_central_steps = TalosFactory(OS = 'tiger',
                          envName='mac',
                          buildBranch="2.0",
                          configOptions=basicConfig,
                          buildSearchString="en-US.mac.dmg",
                          buildDir=MAC_MOZ2_CENTRAL_BUILDDIR,
                          buildPath="../Minefield.app/Contents/MacOS/firefox",
                          talosCmd=basicTalosCmd)

leopard_moz2_central_steps = TalosFactory(OS = 'leopard',
                          envName='mac',
                          buildBranch="2.0",
                          configOptions=basicConfig,
                          buildSearchString="en-US.mac.dmg",
                          buildDir=MAC_MOZ2_CENTRAL_BUILDDIR,
                          buildPath="../Minefield.app/Contents/MacOS/firefox",
                          talosCmd=basicTalosCmd)

mac_moz2_central_fast_steps = TalosFactory(OS = 'tiger',
                          envName='mac',
                          buildBranch="2.0",
                          configOptions=fastConfig,
                          customManifest=fastManifest,
                          buildSearchString="en-US.mac.dmg",
                          buildDir=MAC_MOZ2_CENTRAL_BUILDDIR,
                          buildPath="../Minefield.app/Contents/MacOS/firefox",
                          talosCmd=basicTalosCmd)

mac_moz2_actionmonkey_steps = TalosFactory(OS = 'tiger',
                          envName='mac',
                          buildBranch="2.0",
                          configOptions=basicConfig,
                          buildSearchString="en-US.mac.dmg",
                          buildDir=MAC_MOZ2_ACTIONMONKEY_BUILDDIR,
                          buildPath="../Minefield.app/Contents/MacOS/firefox",
                          talosCmd=basicTalosCmd)

win32_trunk_builder = {
    'name': "WINNT 5.1 mini talos trunk",
    'slavenames': ['qm-mini-xp01', 'qm-mini-xp02', 'qm-mini-xp03'],
    'builddir': "win32-trunk-mini",
    'factory': win32_trunk_steps,
    'category': "Firefox Trunk"
}

win32_trunk_nochrome_builder = {
    'name': "WINNT 5.1 mini talos trunk nochrome",
    'slavenames': ['qm-mini-xp05'],
    'builddir': "win32-trunk-mini-nochrome",
    'factory': win32_trunk_nochrome_steps,
    'category': "Firefox Trunk"
}

win32_trunk_fast_builder = {
    'name': "WINNT 5.1 mini talos trunk fast",
    'slavenames': ['qm-pxp-fast01'],
    'builddir': "win32-trunk-mini-fast",
    'factory': win32_trunk_fast_steps,
    'category': "Firefox Trunk"
}

win32_trunk_jss_builder = {
    'name': "WINNT 5.1 mini talos trunk jss",
    'slavenames': ['qm-pxp-jss01', 'qm-pxp-jss02', 'qm-pxp-jss03'],
    'builddir': "win32-trunk-mini-jss",
    'factory': win32_trunk_jss_steps,
    'category': "Firefox Trunk"
}

win32_branch_builder = {
    'name': "WINNT 5.1 mini talos branch",
    'slavenames': ['qm-mini-xp04'],
    'builddir': "win32-branch",
    'factory': win32_branch_steps,
    'category': "Firefox BRANCH_1_8"
}

win32_branch_fast_builder = {
    'name': "WINNT 5.1 mini talos branch fast",
    'slavenames': ['qm-pxp-fast02'],
    'builddir': "win32-branch-fast",
    'factory': win32_branch_fast_steps,
    'category': "Firefox BRANCH_1_8"
}

win32_moz2_central_builder = {
    'name': "WINNT 5.1 talos mozilla-central",
    'slavenames': ['qm-pxp-trunk01', 'qm-pxp-trunk02', 'qm-pxp-trunk03'],
    'builddir': "win32-moz2-central",
    'factory': win32_moz2_central_steps,
    'category': "Moz2"
}

win32_moz2_central_fast_builder = {
    'name': "WINNT 5.1 talos mozilla-central fast",
    'slavenames': ['qm-pxp-fast03'],
    'builddir': "win32-moz2-central-fast",
    'factory': win32_moz2_central_fast_steps,
    'category': "Moz2"
}

vista_trunk_builder = {
    'name': "WINNT 6.0 talos trunk",
    'slavenames': ['qm-mini-vista01', 'qm-mini-vista02', 'qm-mini-vista03'],
    'builddir': "vista-trunk",
    'factory': vista_trunk_steps,
    'category': "Firefox Trunk"
}

vista_trunk_nochrome_builder = {
    'name': "WINNT 6.0 talos trunk nochrome",
    'slavenames': ['qm-mini-vista05'],
    'builddir': "vista-trunk-nochrome",
    'factory': vista_trunk_nochrome_steps,
    'category': "Firefox Trunk"
}

vista_moz2_central_builder = {
    'name': "WINNT 6.0 talos mozilla-central",
    'slavenames': ['qm-pvista-trunk01', 'qm-pvista-trunk02', 'qm-pvista-trunk03'],
    'builddir': "vista-moz2-central",
    'factory': vista_moz2_central_steps,
    'category': "Moz2"
}

vista_branch_builder = {
    'name': "WINNT 6.0 talos branch",
    'slavenames': ['qm-mini-vista04'],
    'builddir': "vista-branch",
    'factory': vista_branch_steps,
    'category': "Firefox BRANCH_1_8"
}

linux_trunk_builder = {
    'name': "Linux talos trunk",
    'slavenames': ['qm-mini-ubuntu01', 'qm-mini-ubuntu02', 'qm-mini-ubuntu05'],
    'builddir': "linux-trunk",
    'factory': linux_trunk_steps,
    'category': "Firefox Trunk"
}

linux_trunk_nochrome_builder = {
    'name': "Linux talos trunk nochrome",
    'slavenames': ['qm-mini-ubuntu03'],
    'builddir': "linux-trunk-nochrome",
    'factory': linux_trunk_nochrome_steps,
    'category': "Firefox Trunk"
}

linux_trunk_fast_builder = {
    'name': "Linux talos trunk fast",
    'slavenames': ['qm-plinux-fast01'],
    'builddir': "linux-trunk-fast",
    'factory': linux_trunk_fast_steps,
    'category': "Firefox Trunk"
}

linux_branch_builder = {
    'name': "Linux talos branch",
    'slavenames': ['qm-mini-ubuntu04'],
    'builddir': "linux-branch",
    'factory': linux_branch_steps,
    'category': "Firefox BRANCH_1_8"
}

linux_branch_fast_builder = {
    'name': "Linux talos branch fast",
    'slavenames': ['qm-plinux-fast02'],
    'builddir': "linux-branch-fast",
    'factory': linux_branch_fast_steps,
    'category': "Firefox BRANCH_1_8"
}

linux_moz2_central_builder = {
    'name': "Linux talos mozilla-central",
    'slavenames': ['qm-plinux-trunk01', 'qm-plinux-trunk02', 'qm-plinux-trunk03'],
    'builddir': "linux-moz2-central",
    'factory': linux_moz2_central_steps,
    'category': "Moz2"
}

linux_moz2_central_fast_builder = {
    'name': "Linux talos mozilla-central fast",
    'slavenames': ['qm-plinux-fast03'],
    'builddir': "linux-moz2-central-fast",
    'factory': linux_moz2_central_fast_steps,
    'category': "Moz2"
}

mac_trunk_builder = {
    'name': "MacOSX Darwin 8.8.1 talos trunk",
    'slavenames': ['qm-pmac01', 'qm-pmac02', 'qm-pmac03'],
    'builddir': "mac-trunk",
    'factory': mac_trunk_steps,
    'category': "Firefox Trunk"
}

mac_trunk_nochrome_builder = {
    'name': "MacOSX Darwin 8.8.1 talos trunk nochrome",
    'slavenames': ['qm-pmac05'],
    'builddir': "mac-trunk-nochrome",
    'factory': mac_trunk_nochrome_steps,
    'category': "Firefox Trunk"
}

mac_trunk_fast_builder = {
    'name': "MacOSX Darwin 8.8.1 talos trunk fast",
    'slavenames': ['qm-pmac-fast01'],
    'builddir': "mac-trunk-fast",
    'factory': mac_trunk_fast_steps,
    'category': "Firefox Trunk"
}

leopard_trunk_builder = {
    'name': "MacOSX Darwin 9.2.2 talos trunk",
    'slavenames': ['qm-pmac-trunk04', 'qm-pmac-trunk05', 'qm-pmac-trunk06'],
    'builddir': "leopard-trunk",
    'factory': leopard_trunk_steps,
    'category': "Firefox Trunk"
}

leopard_moz2_central_builder = {
    'name': "MacOSX Darwin 9.2.2 talos mozilla-central",
    'slavenames': ['qm-pleopard-trunk01', 'qm-pleopard-trunk02', 'qm-pleopard-trunk03'],
    'builddir': "leopard-moz2-central",
    'factory': leopard_moz2_central_steps,
    'category': "Moz2"
}

mac_branch_builder = {
    'name': "MacOSX Darwin 8.8.1 talos branch",
    'slavenames': ['qm-pmac04'],
    'builddir': "mac-branch",
    'factory': mac_branch_steps,
    'category': "Firefox BRANCH_1_8"
}

mac_branch_fast_builder = {
    'name': "MacOSX Darwin 8.8.1 talos branch fast",
    'slavenames': ['qm-pmac-fast02'],
    'builddir': "mac-branch-fast",
    'factory': mac_branch_fast_steps,
    'category': "Firefox BRANCH_1_8"
}

mac_moz2_central_builder = {
    'name': "MacOSX Darwin 8.8.1 talos mozilla-central",
    'slavenames': ['qm-pmac-trunk01', 'qm-pmac-trunk02', 'qm-pmac-trunk03'],
    'builddir': "mac-moz2-central",
    'factory': mac_moz2_central_steps,
    'category': "Moz2"
}

mac_moz2_central_fast_builder = {
    'name': "MacOSX Darwin 8.8.1 talos mozilla-central fast",
    'slavenames': ['qm-pmac-fast03'],
    'builddir': "mac-moz2-central-fast",
    'factory': mac_moz2_central_fast_steps,
    'category': "Moz2"
}

#ACTIONMONKEY
win32_moz2_actionmonkey_builder = {
    'name': "WINNT 5.1 talos actionmonkey",
    'slavenames': ['qm-pxp-trunk04', 'qm-pxp-trunk05', 'qm-pxp-trunk06'],
    'builddir': "win32-moz2-actionmonkey",
    'factory': win32_moz2_actionmonkey_steps,
    'category': "Moz2"
}
linux_moz2_actionmonkey_builder = {
    'name': "Linux talos actionmonkey",
    'slavenames': ['qm-plinux-trunk04', 'qm-plinux-trunk05', 'qm-plinux-trunk06'],
    'builddir': "linux-moz2-actionmonkey",
    'factory': linux_moz2_actionmonkey_steps,
    'category': "Moz2"
}
mac_moz2_actionmonkey_builder = {
    'name': "MacOSX Darwin 8.8.1 talos actionmonkey",
    'slavenames': ['qm-pmac-trunk07', 'qm-pmac-trunk08', 'qm-pmac-trunk09'],
    'builddir': "mac-moz2-actionmonkey",
    'factory': mac_moz2_actionmonkey_steps,
    'category': "Moz2"
}

c['builders'] = []

c['builders'].append(win32_trunk_builder)
c['builders'].append(win32_trunk_nochrome_builder)
c['builders'].append(win32_trunk_fast_builder)
c['builders'].append(win32_trunk_jss_builder)
c['builders'].append(win32_branch_builder)
c['builders'].append(win32_branch_fast_builder)
c['builders'].append(vista_trunk_builder)
c['builders'].append(vista_trunk_nochrome_builder)
c['builders'].append(vista_branch_builder)
c['builders'].append(linux_trunk_builder)
c['builders'].append(linux_trunk_nochrome_builder)
c['builders'].append(linux_trunk_fast_builder)
c['builders'].append(linux_branch_builder)
c['builders'].append(linux_branch_fast_builder)
c['builders'].append(mac_trunk_builder)
c['builders'].append(mac_trunk_nochrome_builder)
c['builders'].append(mac_trunk_fast_builder)
c['builders'].append(leopard_trunk_builder)
c['builders'].append(mac_branch_builder)
c['builders'].append(mac_branch_fast_builder)
#moz2
c['builders'].append(win32_moz2_central_builder)
c['builders'].append(linux_moz2_central_builder)
c['builders'].append(mac_moz2_central_builder)
c['builders'].append(vista_moz2_central_builder)
c['builders'].append(leopard_moz2_central_builder)
#fast cycling moz-central
c['builders'].append(win32_moz2_central_fast_builder)
c['builders'].append(linux_moz2_central_fast_builder)
c['builders'].append(mac_moz2_central_fast_builder)
#ACTIONMONKEY
c['builders'].append(win32_moz2_actionmonkey_builder)
c['builders'].append(linux_moz2_actionmonkey_builder)
c['builders'].append(mac_moz2_actionmonkey_builder)
